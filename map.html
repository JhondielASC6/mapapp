<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Relax Parking</title>
<meta name="viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.js"></script>
<link href="https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="style.css">
<style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<!-- The core Firebase JS SDK is always required and must be listed first -->

<script src="https://www.gstatic.com/firebasejs/6.3.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.3.4/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.3.4/firebase-database.js"></script>
<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyBlT4J6gUPeS4Rn_RWtbxwP4DkeIwSXQKw",
    authDomain: "loyal-synthesis-249218.firebaseapp.com",
    databaseURL: "https://loyal-synthesis-249218.firebaseio.com",
    projectId: "loyal-synthesis-249218",
    storageBucket: "",
    messagingSenderId: "206168522008",
    appId: "1:206168522008:web:ba5699a4e783247a"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
</script>
<body>
 
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.1/mapbox-gl-geocoder.min.js"></script>
<link rel="stylesheet" href= "https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.1/mapbox-gl-geocoder.css" type="text/css" />

<div id="map"> 
        
    <div>
            <header class="clearfix">
                    <div class="container">
                        <div class="header-left">
                            <a  class="homey" href="index.html">Relax Parking</a>
                        </div>
                        <div class="header-right">
                            <label for="open">
                                <span class="hidden-desktop"></span>
                            </label>
                            <nav>
                                    <a href="Table_Responsive_v1/index.html">Listings</a>
                                    <a href="#">ooo</a>
                                    <a href="#">oo</a>
                
                                </nav>
                        </div>
                    </div>
                </header>
    </div>
</div>
 
<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoiamhvbm55amF5MjMiLCJhIjoiY2p6YWNlamZnMDBkODNpcDd2cXJtcWU2bSJ9.tFQhbAx-l_Sh6OS2CqLpLA';
var map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/mapbox/streets-v11',
center: [-73.9830425123903,40.763029220643716],
zoom: 18
});
marker = new mapboxgl.Marker()
  .setLngLat([-73.9835735897735,40.762803718272124])
  .addTo(map);
  marker = new mapboxgl.Marker()
  .setLngLat([-73.98248247951148,40.76318688286159])
  .addTo(map);
marker = new mapboxgl.Marker()
  .setLngLat([-73.9830799,40.7630891])
  .addTo(map);

map.addControl(new MapboxGeocoder({
accessToken: mapboxgl.accessToken,
marker: {
 color: 'orange'
},
mapboxgl: mapboxgl
}));
// map.addControl(new mapboxgl.GeolocateControl({
//     accessToken: mapboxgl.accessToken,
//     marker: {
//  color: 'orange'
// },
// positionOptions: {
// enableHighAccuracy: true
// },

// trackUserLocation: true
// },
var geolocate = new mapboxgl.GeolocateControl();

map.addControl(geolocate);

geolocate.on('geolocate', function(e) {
      var lon = e.coords.longitude;
      var lat = e.coords.latitude
      var position = [lon, lat];
      console.log(position);
      marker = new mapboxgl.Marker()
  .setLngLat(position)
  .addTo(map)
  lnglat = JSON.stringify(e.lngLat);
 XY = JSON.stringify(e.point);

 function updateDB(event){
     event.preventDefault();
     const LngLat       = lnglatElement.value;
};
});


var marker
var lnglat;
var XY;
 map.on('click', function (e) {
 console.log(JSON.stringify(e.point) +  JSON.stringify(e.lngLat));
let x = e.lngLat;
x.lat=x.lat-0.005;
marker = new mapboxgl.Marker()
  .setLngLat(x)
  .addTo(map)
 });
 

 

</script>
 
</body>
</html>